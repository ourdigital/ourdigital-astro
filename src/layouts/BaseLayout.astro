---
import Header from '@components/Header.astro';
import Footer from '@components/Footer.astro';
import '@styles/global.css';

interface Props {
  title: string;
  description?: string;
  lang?: 'ko' | 'en';
}

const {
  title,
  description = '데이터로 진단하고, 실행으로 처방합니다. 25년 경력의 마케팅 사이언티스트가 중소기업의 디지털 성장을 돕습니다.',
  lang = 'ko'
} = Astro.props;
---

<!DOCTYPE html>
<html lang={lang}>
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>{title} | OurDigital Clinic</title>
  <meta name="description" content={description}>

  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Noto+Sans+KR:wght@400;500;700&display=swap" rel="stylesheet">

  <!-- Lucide Icons -->
  <script src="https://unpkg.com/lucide@latest" defer></script>

  <slot name="head" />
</head>
<body>
  <Header />

  <main>
    <slot />
  </main>

  <Footer />

  <script>
    // Initialize Lucide icons after DOM is ready
    document.addEventListener('DOMContentLoaded', () => {
      // @ts-ignore
      if (typeof lucide !== 'undefined') {
        // @ts-ignore
        lucide.createIcons();
      }
    });

    // Also initialize on page navigation (for View Transitions)
    document.addEventListener('astro:page-load', () => {
      // @ts-ignore
      if (typeof lucide !== 'undefined') {
        // @ts-ignore
        lucide.createIcons();
      }
    });
  </script>
</body>
</html>
